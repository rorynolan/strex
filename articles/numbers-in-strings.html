<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Numbers Within Strings • strex</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Numbers Within Strings">
<meta property="og:description" content="strex">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">strex</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/alphordering-numbers.html">Alphordering Numbers</a>
    </li>
    <li>
      <a href="../articles/argument-matching.html">Argument Matching</a>
    </li>
    <li>
      <a href="../articles/before-and-after.html">Before and After</a>
    </li>
    <li>
      <a href="../articles/important-miscellany.html">Important Miscellany</a>
    </li>
    <li>
      <a href="../articles/numbers-in-strings.html">Numbers Within Strings</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rorynolan/strex/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="numbers-in-strings_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Numbers Within Strings</h1>
            
            <h4 data-toc-skip class="date">2022-07-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rorynolan/strex/blob/HEAD/vignettes/numbers-in-strings.Rmd" class="external-link"><code>vignettes/numbers-in-strings.Rmd</code></a></small>
      <div class="hidden name"><code>numbers-in-strings.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="a-common-way-to-encode-numerical-data">A common way to encode numerical data<a class="anchor" aria-label="anchor" href="#a-common-way-to-encode-numerical-data"></a>
</h2>
<p>It’s common for a lot of numerical information to be encoded in strings, particularly in file names. Consider a series of microscope images of cells from different patients detailing the patient number, the cell number and the number of hours after biopsy that the image was taken. They might be named like:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">img_names</span></span>
<span><span class="co">#&gt;  [1] "patient1-cell1-0hours-after-biopsy.tif"  </span></span>
<span><span class="co">#&gt;  [2] "patient1-cell1-2.5hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt;  [3] "patient1-cell2-0hours-after-biopsy.tif"  </span></span>
<span><span class="co">#&gt;  [4] "patient1-cell2-2.5hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt;  [5] "patient1-cell3-0hours-after-biopsy.tif"  </span></span>
<span><span class="co">#&gt;  [6] "patient1-cell3-2.5hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt;  [7] "patient2-cell1-0hours-after-biopsy.tif"  </span></span>
<span><span class="co">#&gt;  [8] "patient2-cell1-2.5hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt;  [9] "patient2-cell2-0hours-after-biopsy.tif"  </span></span>
<span><span class="co">#&gt; [10] "patient2-cell2-2.5hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; [11] "patient2-cell3-0hours-after-biopsy.tif"  </span></span>
<span><span class="co">#&gt; [12] "patient2-cell3-2.5hours-after-biopsy.tif"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="all-of-the-numbers">All of the numbers<a class="anchor" aria-label="anchor" href="#all-of-the-numbers"></a>
</h2>
<p>For some crude reason, you might just want all of the numbers:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rorynolan.github.io/strex/" class="external-link">strex</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/str_extract_numbers.html">str_extract_numbers</a></span><span class="op">(</span><span class="va">img_names</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 1 1 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 1 1 2 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] 1 2 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; [1] 1 2 2 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; [1] 1 3 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[6]]</span></span>
<span><span class="co">#&gt; [1] 1 3 2 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[7]]</span></span>
<span><span class="co">#&gt; [1] 2 1 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[8]]</span></span>
<span><span class="co">#&gt; [1] 2 1 2 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[9]]</span></span>
<span><span class="co">#&gt; [1] 2 2 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[10]]</span></span>
<span><span class="co">#&gt; [1] 2 2 2 5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[11]]</span></span>
<span><span class="co">#&gt; [1] 2 3 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[12]]</span></span>
<span><span class="co">#&gt; [1] 2 3 2 5</span></span></code></pre></div>
<p>It seems to have missed the fact that 2.5 is a number and not two numbers 2 and 5. This is because the default is <code>decimals = FALSE</code>. To recognise decimals, set <code>decimals = TRUE</code>. Also, note that there is an option to recognise scientific notation. More on that below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/str_extract_numbers.html">str_extract_numbers</a></span><span class="op">(</span><span class="va">img_names</span>, decimals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 1 1 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 1.0 1.0 2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] 1 2 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; [1] 1.0 2.0 2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; [1] 1 3 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[6]]</span></span>
<span><span class="co">#&gt; [1] 1.0 3.0 2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[7]]</span></span>
<span><span class="co">#&gt; [1] 2 1 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[8]]</span></span>
<span><span class="co">#&gt; [1] 2.0 1.0 2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[9]]</span></span>
<span><span class="co">#&gt; [1] 2 2 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[10]]</span></span>
<span><span class="co">#&gt; [1] 2.0 2.0 2.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[11]]</span></span>
<span><span class="co">#&gt; [1] 2 3 0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[12]]</span></span>
<span><span class="co">#&gt; [1] 2.0 3.0 2.5</span></span></code></pre></div>
<p>It’s also possible to extract the non-numeric parts of the strings:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/str_extract_non_numerics.html">str_extract_non_numerics</a></span><span class="op">(</span><span class="va">img_names</span>, decimals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[6]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[7]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[8]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[9]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[10]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[11]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[12]]</span></span>
<span><span class="co">#&gt; [1] "patient"                "-cell"                  "-"                     </span></span>
<span><span class="co">#&gt; [4] "hours-after-biopsy.tif"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extract-specific-numbers">Extract specific numbers<a class="anchor" aria-label="anchor" href="#extract-specific-numbers"></a>
</h2>
<p>What if we just want the cell number from each image?</p>
<div class="section level3">
<h3 id="the-nth-number">The <code>n</code><sup>th</sup> number<a class="anchor" aria-label="anchor" href="#the-nth-number"></a>
</h3>
<p>We know the cell number is always the second number, so we can use the <code><a href="../reference/str_nth_number.html">str_nth_number()</a></code> function with <code>n = 2</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/str_nth_number.html">str_nth_number</a></span><span class="op">(</span><span class="va">img_names</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="numbers-after-patterns">Numbers after patterns<a class="anchor" aria-label="anchor" href="#numbers-after-patterns"></a>
</h3>
<p>To be more specific, you could say the cell number is the first number after the first instance of the word “cell”. To go this route, <code>strex</code> provides <code><a href="../reference/str_nth_number_after_mth.html">str_nth_number_after_mth()</a></code> which gives the <code>n</code><sup>th</sup> number after the <code>m</code><sup>th</sup> appearance of a given pattern:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/str_nth_number_after_mth.html">str_nth_number_after_mth</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"cell"</span>, n <span class="op">=</span> <span class="fl">1</span>, m <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3</span></span></code></pre></div>
<p>There’s also a convenient wrapper for getting the first number after the first appearance of a pattern:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/str_nth_number_after_mth.html">str_first_number_after_first</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"cell"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="numbers-before-patterns">Numbers before patterns<a class="anchor" aria-label="anchor" href="#numbers-before-patterns"></a>
</h3>
<p>Now what if we want the number of hours after biopsy for each image? Looking at the image file names, we’d need the last number <em>before</em> the first occurrence of the word “biopsy”.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/str_nth_number_before_mth.html">str_last_number_before_first</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"biopsy"</span>, decimals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 0.0 2.5 0.0 2.5 0.0 2.5 0.0 2.5 0.0 2.5 0.0 2.5</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tidy-number-extraction">Tidy number extraction<a class="anchor" aria-label="anchor" href="#tidy-number-extraction"></a>
</h3>
<p>To extract all of this information tidily, use a data frame:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">img_names</span>,</span>
<span>  patient <span class="op">=</span> <span class="fu"><a href="../reference/str_nth_number_after_mth.html">str_first_number_after_first</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"patient"</span><span class="op">)</span>,</span>
<span>  cell <span class="op">=</span> <span class="fu"><a href="../reference/str_nth_number_after_mth.html">str_first_number_after_first</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"cell"</span><span class="op">)</span>,</span>
<span>  hrs_after_biop <span class="op">=</span> <span class="fu"><a href="../reference/str_nth_number_before_mth.html">str_last_number_before_first</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"biop"</span>, </span>
<span>                                                decimals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   img_names patient cell hrs_after_biop</span></span>
<span><span class="co">#&gt; 1    patient1-cell1-0hours-after-biopsy.tif       1    1            0.0</span></span>
<span><span class="co">#&gt; 2  patient1-cell1-2.5hours-after-biopsy.tif       1    1            2.5</span></span>
<span><span class="co">#&gt; 3    patient1-cell2-0hours-after-biopsy.tif       1    2            0.0</span></span>
<span><span class="co">#&gt; 4  patient1-cell2-2.5hours-after-biopsy.tif       1    2            2.5</span></span>
<span><span class="co">#&gt; 5    patient1-cell3-0hours-after-biopsy.tif       1    3            0.0</span></span>
<span><span class="co">#&gt; 6  patient1-cell3-2.5hours-after-biopsy.tif       1    3            2.5</span></span>
<span><span class="co">#&gt; 7    patient2-cell1-0hours-after-biopsy.tif       2    1            0.0</span></span>
<span><span class="co">#&gt; 8  patient2-cell1-2.5hours-after-biopsy.tif       2    1            2.5</span></span>
<span><span class="co">#&gt; 9    patient2-cell2-0hours-after-biopsy.tif       2    2            0.0</span></span>
<span><span class="co">#&gt; 10 patient2-cell2-2.5hours-after-biopsy.tif       2    2            2.5</span></span>
<span><span class="co">#&gt; 11   patient2-cell3-0hours-after-biopsy.tif       2    3            0.0</span></span>
<span><span class="co">#&gt; 12 patient2-cell3-2.5hours-after-biopsy.tif       2    3            2.5</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="other-number-formats">Other number formats<a class="anchor" aria-label="anchor" href="#other-number-formats"></a>
</h3>
<p><code>strex</code> can also deal with numbers in scientific and comma notation.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">string</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"$1,000"</span>, <span class="st">"$1e6"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/str_nth_number.html">str_first_number</a></span><span class="op">(</span><span class="va">string</span>, commas <span class="op">=</span> <span class="cn">TRUE</span>, sci <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1e+03 1e+06</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="all-of-the-number-functions">All of the number functions<a class="anchor" aria-label="anchor" href="#all-of-the-number-functions"></a>
</h2>
<p>There are a whole host of functions for extracting numbers from strings in the <code>strex</code> package:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html" class="external-link">str_subset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="st">"package:strex"</span><span class="op">)</span>, <span class="st">"number"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "str_extract_numbers"           "str_first_number"             </span></span>
<span><span class="co">#&gt;  [3] "str_first_number_after_first"  "str_first_number_after_last"  </span></span>
<span><span class="co">#&gt;  [5] "str_first_number_after_mth"    "str_first_number_before_first"</span></span>
<span><span class="co">#&gt;  [7] "str_first_number_before_last"  "str_first_number_before_mth"  </span></span>
<span><span class="co">#&gt;  [9] "str_last_number"               "str_last_number_after_first"  </span></span>
<span><span class="co">#&gt; [11] "str_last_number_after_last"    "str_last_number_after_mth"    </span></span>
<span><span class="co">#&gt; [13] "str_last_number_before_first"  "str_last_number_before_last"  </span></span>
<span><span class="co">#&gt; [15] "str_last_number_before_mth"    "str_nth_number"               </span></span>
<span><span class="co">#&gt; [17] "str_nth_number_after_first"    "str_nth_number_after_last"    </span></span>
<span><span class="co">#&gt; [19] "str_nth_number_after_mth"      "str_nth_number_before_first"  </span></span>
<span><span class="co">#&gt; [21] "str_nth_number_before_last"    "str_nth_number_before_mth"    </span></span>
<span><span class="co">#&gt; [23] "str_split_by_numbers"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="regular-expression">Regular expression<a class="anchor" aria-label="anchor" href="#regular-expression"></a>
</h2>
<p>Of course, all of the above is possible with regular expression using <code>stringr</code>, it’s just more difficult and less expressive:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">img_names</span>,</span>
<span>  patient <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_match.html" class="external-link">str_match</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"patient(\\d+)"</span><span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>,</span>
<span>  cell <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_match.html" class="external-link">str_match</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"cell(\\d+)"</span><span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span>,</span>
<span>  hrs_after_biop <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_match.html" class="external-link">str_match</a></span><span class="op">(</span><span class="va">img_names</span>, <span class="st">"(\\d*\\.*\\d+)hour"</span><span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   img_names patient cell hrs_after_biop</span></span>
<span><span class="co">#&gt; 1    patient1-cell1-0hours-after-biopsy.tif       1    1              0</span></span>
<span><span class="co">#&gt; 2  patient1-cell1-2.5hours-after-biopsy.tif       1    1            2.5</span></span>
<span><span class="co">#&gt; 3    patient1-cell2-0hours-after-biopsy.tif       1    2              0</span></span>
<span><span class="co">#&gt; 4  patient1-cell2-2.5hours-after-biopsy.tif       1    2            2.5</span></span>
<span><span class="co">#&gt; 5    patient1-cell3-0hours-after-biopsy.tif       1    3              0</span></span>
<span><span class="co">#&gt; 6  patient1-cell3-2.5hours-after-biopsy.tif       1    3            2.5</span></span>
<span><span class="co">#&gt; 7    patient2-cell1-0hours-after-biopsy.tif       2    1              0</span></span>
<span><span class="co">#&gt; 8  patient2-cell1-2.5hours-after-biopsy.tif       2    1            2.5</span></span>
<span><span class="co">#&gt; 9    patient2-cell2-0hours-after-biopsy.tif       2    2              0</span></span>
<span><span class="co">#&gt; 10 patient2-cell2-2.5hours-after-biopsy.tif       2    2            2.5</span></span>
<span><span class="co">#&gt; 11   patient2-cell3-0hours-after-biopsy.tif       2    3              0</span></span>
<span><span class="co">#&gt; 12 patient2-cell3-2.5hours-after-biopsy.tif       2    3            2.5</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rory Nolan.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
